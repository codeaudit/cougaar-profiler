<html>
<head><title>Cougaar Memory Profiler</title></head>
<body>
<h2>Cougaar Memory Profiler</h2>
<p>
The Cougaar Memory Profiler is a Java-based memory profiler that
can be used to detect memory usage and leaks.
<p>
This module defines the "profiler_impl" APIs and basic
implementation.  An example UI is also provided.
<p>
This tool was developed because JVMPI (used in "java -Xrunhprof"
and "OptimizeIt<sup><small>(TM)</small></sup>") has significant
performance issues and JSR-163's profiler architecture has not
been implemented yet.
<p>
Developers must run the "profiler_transform" scripts to add
profiling instructions to their compiled classes.  It basically
transforms a class like:<pre>
  public class Bar extends Foo {
    public Bar() {
    System.out.println("Hello, world!");
    }
  }
</pre>into:<pre>
  import org.cougaar.profiler.MemoryTracker;
  public class Bar extends Foo {
    public Bar() {
      System.out.println("Hello, world!");
      MY_PROFILER.add(this);
    }
    private static final MemoryTracker MY_PROFILER =
      MemoryTracker.getInstance("Bar");
  }
</pre> 
The developer selects which classes to profile and only runs
the class modifier on the selected classes.  This makes
the tool scalable.
<p>
At runtime the constructor will register new instances with
the MemoryTracker, which will maintain WeakReferences to the
instances.  The MemoryTracker periodically scans its tables
for GC'ed WeakReferences and maintains pointers to the live
objects.
<p>
The included MemoryTracker implementation is MemoryStats.
It keeps counters for the number of instances allocated and
collected.  Addditionally it supports compile-time configuration
options to enable more detailed per-object information (e.g.
allocation time and stacktrace).  These options are specified
in <code>org.cougaar.profiler.Configure</code>.
<p>
An example text-based UI is provided:<pre>
  examples/org/cougaar/profiler/examples/SimpleTest.java
</pre>  It is not compiled in the standard jar but is
easy to compile by using the "build.xml"'s "compile-examples"
target.
<p>
A full-feature servlet-based UI is included in the
"profiler_servlet" module.
<p>
</body>
</html>
