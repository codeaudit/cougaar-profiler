<html>
<head><title>Cougaar MemoryTracker Bytecode Modifier</title></head>
<body>
<h2>Cougaar MemoryTracker Bytecode Modifier</h2>
<p>
This module contains bytecode tools that add MemoryTracker
profiling instructions to class files.
<p>
<a href="http://jakarta.apache.org/bcel/">BCEL 5.1</a> is required
to modify the classes but not required when running the profiler.
<p>
There are two usage patterns.  The simplest is to run the
modifier on a single class:<pre>
  TRANSFORM=$COUGAAR_INSTALL_PATH/lib/profiler_transform.jar
  BCEL=$COUGAAR_INSTALL_PATH/sys/bcel.jar
  LIB=$BCEL:$TRANSFORM  # plus other jars as necessary
  cat YourObject.class |\
    java \
    -classpath $LIB \
    org.cougaar.profiler.transform.AddProfiler - \
    &gt; /tmp/YourObject.class
</pre>
Run the above class with "--help" for additional options.
<p>
If you're modifying more than one class then you should use
the helper "ProfileAll" class, which recursively finds and
modifies "*.class" files:<pre>
  TRANSFORM=$COUGAAR_INSTALL_PATH/lib/profiler_transform.jar
  BCEL=$COUGAAR_INSTALL_PATH/sys/bcel.jar
  LIB=$BCEL:$TRANSFORM  # plus other jars as necessary
  java \
    -classpath $LIB \
    org.cougaar.profiler.transform.ProfileAll\
    *
</pre>
A directory named "new" will be created and the modified class
files will be placed in that directory.  Run the above class
with "--help" for additional options.
<p>
The class modifier can also be used within a ClassLoader at class
definition time.  The "AddProfiler" defines a standard BCEL
ClassLoader method:<pre>
  public JavaClass modifyClass(JavaClass clazz) {..}
</pre>
See BCEL's "org.apache.bcel.util.ClassLoader" for details.
</body>
</html>
